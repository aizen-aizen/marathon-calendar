# Phase 4: 改善計画

## 概要
アプリの使い勝手とパフォーマンスを向上させる改善フェーズ。

---

## 1. PWA対応

### 目的
- ホーム画面に追加してネイティブアプリのように起動可能に
- iOS Safariでプッシュ通知を受信可能に

### 実装内容
- `manifest.json` の作成
- アプリアイコン（192x192, 512x512）の作成
- Service Workerの拡張（キャッシュ戦略）
- インストールプロンプトの表示

### ファイル
- [NEW] `manifest.json`
- [NEW] `icons/icon-192.png`
- [NEW] `icons/icon-512.png`
- [MODIFY] `index.html` - manifest linkタグ追加
- [MODIFY] `firebase-messaging-sw.js` - キャッシュ機能追加

---

## 2. オフライン対応

### 目的
- ネットワークなしでも大会一覧を閲覧可能に
- お気に入りデータのローカルキャッシュ

### 実装内容
- Service Workerでのリソースキャッシュ
- IndexedDBへのデータ保存
- オフライン時のUIフィードバック
- オンライン復帰時の同期

### キャッシュ対象
- HTML, CSS, JS ファイル
- marathons.json
- お気に入りデータ（IndexedDB）

---

## 3. UI/UX改善

### 目的
- より直感的で使いやすいインターフェース

### 実装候補
- ダークモード切り替え
- 大会詳細モーダル
- ドラッグ&ドロップでお気に入り並び替え
- 検索機能（大会名で検索）
- カレンダービュー（月別表示）
- アニメーション強化
- スケルトンローディング

---

## 4. その他の改善案

### 複数デバイス通知対応
- FCMトークンを配列で保存
- 全デバイスに通知を送信

### パフォーマンス
- 画像の遅延読み込み
- バンドルサイズの最適化

### アクセシビリティ
- キーボードナビゲーション
- スクリーンリーダー対応
- コントラスト比の改善

---

## 優先度

| 項目 | 優先度 | 工数 |
|------|-------|------|
| PWA対応 | 高 | 中 |
| オフライン対応 | 中 | 高 |
| 検索機能 | 中 | 低 |
| ダークモード切り替え | 低 | 低 |
| カレンダービュー | 低 | 高 |
| 複数デバイス通知 | 中 | 中 |

---

## 更新日
2026-02-07
